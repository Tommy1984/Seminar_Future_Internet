\documentclass{semdoc}
% Template: $Id: t01_txt.tex,v 1.7 2000/05/23 12:13:37 bless Exp $
% -----------------------------------------------------------------------------
% Seminarbeitrag
% -----------------------------------------------------------------------------
% Kommentare beginnen mit einem %-Zeichen
\docbegin
% --> Oberhalb der Linie bitte nichts ändern.
% ---------------------------------------------------------------------------
% \/ \/ \/ \/ \/ \/ \/ \/ \/ \/ \/ \/ \/ \/ \/ \/ \/ \/ \/ \/ \/ \/ \/ \/ \/ 
% Stellen, an denen etwas geändert werden soll, sind wie hier gekennzeichnet.
% /\ /\ /\ /\ /\ /\ /\ /\ /\ /\ /\ /\ /\ /\ /\ /\ /\ /\ /\ /\ /\ /\ /\ /\ /\ 

%
% ---------------------------------------------------------------------------
% \/ \/ \/ \/ \/ \/ \/ \/ \/ \/ \/ \/ \/ \/ \/ \/ \/ \/ \/ \/ \/ \/ \/ \/ \/ 
% --> Bitte den Titel des Beitrages in die nächste Zeile eintragen:
\title{Seminararbeit - R3: Resilient Routing Reconfiguration}
%
% --> ... und den Namen des Autors:
\author{Thomas Bersch}
% --> optional eine URL mailto:... oder http://www...
\authorURL{}
% /\ /\ /\ /\ /\ /\ /\ /\ /\ /\ /\ /\ /\ /\ /\ /\ /\ /\ /\ /\ /\ /\ /\ /\ /\ 
% -----------------------------------------------------------------------------
%
%
\maketitle
%
% ---------------------------------------------------------------------------
% \/ \/ \/ \/ \/ \/ \/ \/ \/ \/ \/ \/ \/ \/ \/ \/ \/ \/ \/ \/ \/ \/ \/ \/ \/ 
% --> ... und jetzt kommt die Zusammenfassung:
\begin{abstract}
%TODO: Abstract einfügen
Hier steht der Abstract
\end{abstract}
% /\ /\ /\ /\ /\ /\ /\ /\ /\ /\ /\ /\ /\ /\ /\ /\ /\ /\ /\ /\ /\ /\ /\ /\ /\ 
% -----------------------------------------------------------------------------
% ACHTUNG - ACHTUNG - ACHTUNG - ACHTUNG - ACHTUNG - ACHTUNG - ACHTUNG - ACHTUNG
% -----------------------------------------------------------------------------
% --> Im Text sollte \section der "höchste" Gliederungsbefehl sein,
%     also bitte kein \chapter oder gar \part verwenden.
%     Der Text kann aber mit \section{}, \subsection{}, \subsubsection{}
%     untergliedert werden.
%
%     Bitte _neue_ Rechtschreibung verwenden!
%
%     Bitte nicht die Befehle \input oder \include verwenden, also den
%     Text _nicht_ in mehrere Dateien aufteilen! 
%
%     \newpage oder manuelle Zeilenumbrche (\\) sollten ebenfalls nicht 
%     verwendet werden.
%
%     Bitte darauf achten, dass im _Quelltext_ ein Abschnitt nicht nur 
%     in einer Zeile steht (das macht z.B. Word beim Exportieren ohne
%     Zeilenumbruch), der Abschnitt sollte auch bei 80 Zeichen pro Zeile
%     noch lesbar sein, d.h. Zeilenumbrche im Quelltext bitte entsprechend
%     einfgen.
%
%     Referenzen auf andere Abschnitte sind bitte mit \ref{...}, wie 
%     anschliessend gezeigt, anzugeben und nicht etwa als Text wie
%     "siehe auch Abschnitt 2.2"
%
%     Anfhrungszeichen sind nicht einfach so "Text" einzugeben, sondern so:
%     "`Text"', andernfalls gibt es Fehler.
%
%     Das Zeichen ~ erzeugt einen Leerraum an dem aber nicht getrennt wird.
%     Weitere Trennstellen:
%     "- = zustzliche Trennstelle
%     "| = Vermeidung von Ligaturen und mgliche Trennung (bsp: Schaf"|fell)
%     "~ = Bindestrich an dem keine Trennung erlaubt ist (bsp: bergauf und "~ab)
%     "= = Bindestrich bei dem Worte vor und dahinter getrennt werden drfen
%     "" = Trennstelle ohne Erzeugung eines Trennstrichs (bsp: und/""oder)
%
%     Weiterer Hinweis: 
%     KEIN Glossar erstellen! Abkrzungen sind im Text zu erklren!
%     Der Text ist mit z.B. mit ispell auf Schreibfehler zu prfen 
%     (am besten aus dem Emacs heraus, 
%     Men: Edit -> Spell -> Select Deutsch8, dann Edit -> Spell -> Check Buffer)
%
% ---------------------------------------------------------------------------
% \/ \/ \/ \/ \/ \/ \/ \/ \/ \/ \/ \/ \/ \/ \/ \/ \/ \/ \/ \/ \/ \/ \/ \/ \/ 

\section{Einleitung}
\label{tD2_Einleitung}
%TODO besserer Begriff für Netzwerkfehler (trifft nicht unbedingt genau die Sache)
Heutige Netze wie beispielsweise das  IP-basierte Internet, 
bestehen in der Regel aus einer Vielzahl einzelner Netzknoten, 
die nicht notwendigerweise direkt, 
sondern über mehrere Knoten hinweg miteinander verbunden sind.
Sollen Information zu einem entfernten Knoten transportiert werden, 
müssen diese von den dazwischen liegenden Netzknoten weitergereicht werden, 
bis sie den Zielknoten erreicht haben.
Die Wahl der zu verwendeten Zwischensysteme, 
also eines Weges wird als Routing bezeichnet.
Ein wichtiger Aspekt dabei ist die Optimierung des Weges bezüglich einer Metrik, 
wie z.B die anfallenden Kosten, der kürzeste Weg, oder die aktuelle Netzauslastung.

Ein Herausforderung beim Routings besteht darin, dass sich die Netztopology ständig ändern kann,
wodurch zuvor gefunden Routen durch das Netz ungültig werden können.
Grunde dafür sind z.B der Ausfall eines Netzknotens, 
das Ändern von Routing-Metriken, die aktuelle Netzauslastung etc..
Um auf solche Situationen reagieren zu können, 
müssen die einzelnen Router untereinander Informationen über den aktuelle Zustand des Netzes austauschen.
Hierzu gibt es eine Reihe von Routing-Protokollen 
wie beispielsweise die im Internet eingesetzten Protokolle 
Open Shortest Path First (OSPF) \cite{RFC2328} oder Intermediate System - Intermediate System (IS-IS) \cite{RFC1142}. 

%TODO Bessere Erklärung für Network resiliency
%TODO Deutscher Begriff für Network resiliency suchen
Ein wichtiger Aspekt bei der Behandlung von Netzwerkfehlern ist Network Resiliency \cite{WWMA10}.
Damit gemeint ist die Fähigkeit eines Netzes,  
schnell und problemlos von einer Reihen von Fehlern oder Unterbrechungen zu kompensieren.
Hauptaugenmerk vieler Studien und heutiger Verfahren liegt vorwiegend auf der Erreichbarkeit von Netz-Komponenten. 
Dazu zählt die Verkürzung von Ausfallzeiten bzw. die Umgehung defekter Routenabschnitte 
um die dahinterliegenden Ziele wieder erreichbar zu machen.
Weitergehende Problem wie die eventuelle Häufung von Stausituation, 
verursacht durch die verminderte Netzkapazität und den umleigleiteten Verkehr, 
sowie fehlende Vorhersagbarkeit über die geänderte Leistungsfähigkeit eines Netzes werden dabei häufig außer acht gelassen.
Das Routing, welches sich ausschließlich auf Erreichbarkeit konzentriert tatsächlich anfällig für vermehrte Stausituationen ist, 
wird ebenfalls in \cite{WWMA10} untersucht und gezeigt.

Eine Schwierigkeit bei der Entwicklung von Routing-Verfahren die auch die oben genannten Probleme berücksichtigen, 
ist die Vielzahl von möglichen Fehlerszenarian.
Geht man von einer Obergenze $F$ von möglichen Fehlern in einem Netzwerk mit $|E|$ Links aus, 
so entspricht die Anzahl der möglichen Fehlerszenarien $\sum_{i=1}^{F} {|E| \choose i}$.
Die Berücksichtigung jedes dieser Szenarien bedeutet i.d.R ein zu hochen Berechnungsaufwand, 
weshalb sich die meisten Verfahren nur auf die Wiederherstellung der Erreichbarkeit beschränken und Staufreiheit etc. außer acht lassen.

%TODO besseres Wort für Routing-Absicherung suchen
R3 - Resilient Routing Reconfiguration \cite{WWMA10} ist nun ein neuer Ansatz zur Routing-Absicherung, 
der trotz der Vielzahl von Szenarien Rechnung Staufreiheit garantieren kann.
Das Verfahren ist zudem effizient in hinsicht auf Berechnungs-Overhead und Speicherverbrauch, 
kann felxiebel an verschieden Leistungsanforderungen angepasst werden 
und ist robust gegenüber Änderungen der Netzbelastung und der Netztopolgie.


%TODO Beispiel für größeren Link-Ausfall: Sprint backbone network 2006


\section{Grundlagen}
\label{tD2_Grundlagen}
%TODO Definition Verkehrsmatrix
Mit Routing wird die Auswahl eines Weges (Route) durch ein Netzwerk bezeichnet, 
der bestimmt über welche Netzknoten eine Dateneinheit von der Quelle (Orgin) bis zum Ziel (Destination) übertragen wird.
Häufig ist eine Route nicht eindeutig, sondner es gibt mehrer Routen für das gleiche Quell/Ziel-Paar. 
Dabei kann für die Datenübertragung nicht nur ein Pfad sondern auch mehrere unterschiedliche Pfade gleichzeitig genutzt werden. 
Jeder Pfad überträgt dann einen gewissen Anteil der zu übermittelnden Informationen.

Fasst man ein IP-Netzwerk als gerichteten Graph $G=(V,E)$ auf, 
wobei $V$ der Menge der Router und $E$ der Menge der Netzwerkverbindungen zwischen den Routern entspircht, 
lässt sich eine Routing $r$ auch als Fluss auffassen \cite{ApCo03}. 
Die Werte $r_{ab}(e)$ geben dazu jeweils den Anteil einer Übertragung von $a \in V$ nach $b \in V$ an, 
der über die Verbindung $e \in E$ geroutet wird.
Als Menge $\{r_{ab}(e)|a,b \in V \land e \in E\}$ zusammengefasst beschreiben diese Werte so das gesammte Routing $r$.
Der Beitrag zur Auslastung einer Verbindung $e$ entspricht dem Produkt $d_{ab}r_{ab}(e)$, 
wobei $d_{ab}$ dem aktuell von Sender $a$ initiierte Verkehr zum Empfänger $b$ entpsicht und $r_{ab}(e)$ der wie oben beschriebene Anteil.

Ein so definiertes Routing gilt als korrekt wenn es die in \cite{WWMA10} beschiebenen Bedingungen erfüllt. 
Nachfolgend sollen diese nocheinmal aufgeführt werden:

Eine Menge $\{r_{ab}(e)\}$ ist ein korrektes Routing, wenn gilt:
\begin{eqnarray}
\forall i \neq a,b: \sum_{(i,j) \in E} r_{ab}(i,j) = \sum_{(j,i) \in E} r_ab(j,i)\\ 
\sum_{(a,i) \in E} r_{ab}(a,i) = 1\\
\forall(i,a) \in E : r_{ab}(i,a) = 0\\
\forall e \in E : 0 \le r_{ab}(e) \le 1
\end{eqnarray}

Die erste Bedingung entspricht dem für Flussnetzwerke üblichen Flusserhalt und fordert, 
dass jeder Zwischenknoten genausoviel weiterleitet wie in ihn hineinfließt.
Die zweite Bedingun forde, dass der gesamte von einer Quelle initierte Verkehr weitergeleitet wird,
während die dritte Bedimng verbeitet ein Teil davon wieder zur Quelle zurückgeleitet wird.
Die vierte Bedinung fordert das der weitergeleitete Anteil zwischen $0\%$ und $100\%$ liegt.


%TODO MPLS - Ausführlicher?
%TODO FEC im zusammenhang mit Packet-Reihenfolge
Multiprotokol Label Switching (MPLS) \cite{RFC3031} ist ein Verfahren, 
welches eine verbindungsorientierte Datenübertragung auch in ansonsten verbindungslosen Netzen ermöglicht. 
Während beim klassichen Routing auf Schicht 3 jeder Router aufs neue den nächsten Knoten (Next Hop) für eine Dateneinheit bestimmen muss,
wird bei MPLS zu Beginn einer Übertragung jede Dateneinheit einer Weiterleitungsklasse (Forwarding Equivalent Class - FEC) zugeordnet, 
die den Pfad (Lable Switch Path - LSP) durch das Netz bestimmt. 
Dazu wird ihr ein kurze Kennung fester Länge, ein sog. Label zugeordnet. 
Die nachfolgenden Knoten können anhand dieses Labels aus einer Tabelle (Incoming Lable Mapping - ILM) den nächsten Knoten bestimmen. 
Eine Auswertung des kompletten Paketkopfes ist nicht mehr notwendig.
MPSL biete außerdem die Möglichkeit einem Paket auch mehr als ein Label zuzuordnen. 
Dazu werden die Labels auf einem Stack, dem Lable-Stack abgelegt. 
Ein Router kann neu Labels auf dem Stack ablegen. 
Für die Auswertung des nächstens Routers wird immer das oberste Stackelement herangezogen. 
Ist der nächste Route aktuelle Router muss das Label wieder Stack entfernt werden.
Der Label-Stack von MPLS wird später bei der Implementierung von R3 in Abschnitt \ref{tD2_Implementierung} benötigt.

%TODO Fast rerouting (FRR) - Ausführlicher?
Ein häufig genutztes Verfahren um auf Netzwerkfehler wie beispielweise der Ausfall einer Verbindung 
oder eines ganzen Netzknotens zu reagieren, 
ist das in \cite{RFC5714} für IP definierte Fast-Rerotuing.
Wird bei der Paketübertragung ein Netzwerkfehler von einem Router erkannt, 
muss für den ursprünglichen Pfad eine Alternative gefunden werden, 
die die ausgefallenen Netzkomponenten nicht verwendet. Solange ist keine Übertragung möglich.
Die Dauer dieser Unterbrechung setzt sich dabei zusammen, 
aus der Zeit bis der Fehler erkannt wird, 
der Zeit bis der lokale Router auf den Fehler reagiert, 
die Zeit bis die Informationen über den Fehler an die anderen Router weitergeleitet ist, 
der Zeit zur Neuberechnung der Routing-Tabellen 
und der Zeit um die Routing-Tabellen in die Hardware zu übertragen.
Um nun diese Ausfallzeit möglichst kurz zu halten, 
verwendet Fast-Rerouting eine schon vorab berechnete alternative Route 
um die ausgefallenen Komponenten zu umgehen.
Dadurch kann die auf die Erkennung des Fehlers am lokalen Router und das aktivieren der Alterniv-Route beschränkt werden. 
Eine Information der anderen Router im Netz ist nicht zwingen erforderlich.
Für MPLS gibt es eine ähnlich arbeitenden Variante die in \cite{RFC4090} beschrieben wird.


%TODO Verwandte Arbeiten, bessere Einleitung suchen.
%TODO "Routing für sich ändernde Netzauslastungen" ist das so richtig?
%TODO Referenzen einfügen
Bisherige Arbeiten zum diesem Thema behandeln meistens nur eine Seite, 
entweder \textit{Routing im Fehlerfall} oder \textit{Routing für sich ändernde Netzauslastungen}.

Der Hauptaugenmerk bei Routing im Fehlerfall liegt dabei in aller Regel auf der Ausfallzeit 
und wie dieser minimiert werden kann. 
Ein häufig verwender Ansatz ist die Vorbrechnung von Alternativ-Routen und das schnell Umschalten im Fehlerfall.
Dieser Ansatz bietet allerdings noch keine Möglichkleit um Stausituation zu vermeiden oder die vorraussichtliche Leistung zu bestimmen.

Alternatiev zu Vorberechnung können bestehende Routen auch nach jedem Fehler angepasst und optimiert werden. 
Der Vorteil besteht darin, dass die neuen Routen jeweils auf die aktuelle Netztopology angepasst sind und diese optimal auslasten können.
Der Nachteil liegt in der schlechteren Reaktionszeit. 
Mitunter kann die Reorganisation des Routings für die neue Netztopology sehr aufwendig zu berechnen und einzurichten sein.

Der andere Aspekt mit dem sich viele Arbeiten befassen ist die Tatsache, 
dass sich die Verkehrssituationen in einem Netz wie beispielweise dem Internet sehr häufig ändern 
und man daher ein Routing benötigt, was dies berücksichtigt.


\section{Resilient Routing Reconfiguration}

%TODO: Bessere Begriffe für Base-Routing und Protection Routing suchen
R3 - Resilient Routing Reconfiguration besteht prinzipiell aus zwei Teilen, 
einer vom eigentlichen Netzbetrieb unabhängigen Vorberechnung (Offline-Phase) 
sowohl eines Base-Routings als auch eines Protection-Routings 
und einer ständigen Rekonfiguration (Online-Phase) des Protection Routings während des Netzbetriebs.

\subsection{Vorberechnung (Offline-Phase)}
In der Vorberechnungsphase wird, sofern noch nicht gegeben, 
ein Routing $r$ für eine Verkehrsmatrix $d$ berechnet, 
Auf dieser Grundlage wird ein Protection-Routing $p$ berechnet, 

\subsection{Rekonfiguration (Online-Phase)}

\subsection{Beweise}

\subsection{Erweiterungen}
%TODO Überschrifften besser formulieren
\textbf{Behandlung von unterschiedlichem Verkehrsaufkommen}

\textbf{Behandlung von realisitschen Fehlerszenarien}

\textbf{Behanldung von Priorisiertem Verkehr}

\textbf{Abwägung zwischne Performance unter normalen Bedinngungen und im Fehlerfall}

\textbf{Abwägung zwischne Netzauslastung und Verzögerungszeiten} 

\section{Implementierung}
\label{tD2_Implementierung}
Die Grundlage von R3 bildet eine flussbasierte Darstellung des Routings.
Da eine solches Routing-Schema von heutigen Routern noch nicht unterstütz wird, 
müssen für eine Implementierung bestehende Verfahren daraufhin angepasst oder neue implementiert werden.
Aufgrud dessen dass viele Anbieter für Router MPLS unterstützen 
und MPLS relative einfach durch MPLS-ff \cite{WWMA10} für flussbasiertes Routing erweitert werden kann, 
eignet es sich sehr gut als Basismechanismus.
Die hierfür notwendigen Erweiterung werden nun nachfolgend beschieben.

Bei reinem MPLS wählt der Router beim Eintreffen eines Paketes anhand dessen Label das zu verwendende Interface, 
über das das Paket weitergeleitet werden soll.
Dazu führt der Router eine Datenstruktur in Form einer Tabel, 
die für jedes Label eine entsprechende "next-hop label forwarding instruction (NHLFE)" enthält. 
Da für jedes Label nur ein Eintrag vorhanden ist, 
wird der gesammt Verkehr der mit demselben Lable gekennzeichnet ist auch immer über dasselbe Interface geroutet.
Um nun eine flussbasiertes Routing mit MPLS zu ermöglichen muss MPLS so erweitert werden, 
dass der zu einem Label gehörende Datenverkehr anteilig auf mehrer Interfaces verteilt  werden kann.
MPLS-ff erweitert dazu die Datenstruktur so, 
dass sie mehrere NHLFE Einträge enthalten kann. 
Außerdem wird jedem NHLFE Eintrag ein Faktor (next-hop splitting ratio) zugeordnet, 
anhand dessen der Router die Pakete auf die, 
diesem Label zugeordneten Interfaces aufteilen kann. 

%TODO Wie wird die next-hop Splitting Ratio implementiert?
%TODO Bessere Erklärung für Protection Routing p.
%TODO Refernz zu Fehlererkennung auf Schicht 2 einfügen
%TODO Was ist mit mehreren Link-Ausfällen?
%TODO Speicherung von p in RIB. Nötig?
%TODO evt. Beispiel fpr MPSL-ff einfügen
Mithilfe der Erweiterung MPLS-ff kann nun R3 implementiert werden.
Die Vorberechnung des \textit{Protection Routings p} und die Einrichtung von MPLS-ff kann von einem zentralen Server erledigt werden.
Die Rekonfiguration während des Betriebes muss jedeer Router selbst durchführen.
Zu Fehlererkennung während des Betriebs kann die Sicherungsschicht (Layer 2) auf Fehlerereignisse beobachtet werden. 
Auch andere Fehlererkennungsverfahren wie z.B \cite{KYGS05} sind möglich.
Wird ein fehlerhafter Link erkannt, 
werden alle andern Router mittels ICMP Paketen üder den Fehler informiert, 
so das diese entsprechend ihr Protection Routing anpassen können.
Dazu muss jeder Router die next-hop spitting ratio für die zu dem ausgefallenen Link gehörenden Sicherungs-Links anpassen.

Um nun Pakete im Fehlerfall umzuleiten wird der Label-Stack von MPLS verwendet. 
Erkennt ein Router einen Linkfehler wird die für das Label des Paketes definierte Alternative-Route aktiviert.
Dazu pusht der Router ein weiters Label auf den Label-Stack des Paketes und ordent es damit der Alternative-Route zu.
Das Paket wird dann entsprechend diesem Lable weitergeleitet. 
Erreicht ein Paket wieder die Ursprungsroute, 
wird das neue Lable wieder vom Label-Stack entfernt und kann auf normalem Weg weitergeleitet werden.








\section{Evaluierung}

\subsection{Simulation}

\subsection{Reale Implementierung}


\section{Zusammenfassung}





% /\ /\ /\ /\ /\ /\ /\ /\ /\ /\ /\ /\ /\ /\ /\ /\ /\ /\ /\ /\ /\ /\ /\ /\ /\ 
% -----------------------------------------------------------------------------
% Bitte keinen Text mehr unterhalb dieser Zeile eintragen!!
% -----------------------------------------------------------------------------
%
% --> blicherweise wird nur die Literatur aufgelistet, die auch referenziert
%     wird. Mchte man auch nichtreferenzierte Literatur einschlieen, so
%     kann man dies mit \nocite{<citelabel>} tun.
\nocite{*}
%     In die folgende Zeile sollte die bentigte Literaturdatenbankdatei
%     eingetragen werden (im Normalfall nicht zu ndern):
\bibliography{tD2_txt}
%
\docend
%%% end of document
